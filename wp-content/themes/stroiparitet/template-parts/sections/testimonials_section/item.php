<?php

/**
 * Testimonials section item layout.
 *
 * @see Page -> Content fields -> Page sections -> Testimonials.
 *
 * @var array $args
 *
 * @package WordPress
 * @subpackage stroiparitet
 */

if( ! $item = $args['item'] ?? null ) return;

$image		= $item['image'];
$avatar		= $item['avatar'];
$name		= $item['name'];
$position	= $item['position'];
$text		= $item['text'];

if( ! $image && ! $text ) return;
?>

<div class="testimonial swiper-slide display-flex flex-wrap">
	<div class="testimonial-left">
		<div class="testimonial-quotes">
			<svg width="227" height="205" viewBox="0 0 227 205" fill="none" xmlns="http://www.w3.org/2000/svg">
				<g opacity="0.1" clip-path="url(#clip0_75500_81)">
					<path d="M94.4441 82.8973C99.6942 82.8642 104.462 80.4294 107.198 76.3841L111.945 69.3648C113.804 66.6167 112.839 63.0162 109.795 61.3386L101.24 56.6245C98.1962 54.947 94.2073 55.8177 92.3488 58.5658L88.0081 64.9841C86.1496 67.7322 87.1143 71.3327 90.1586 73.0103L94.0684 75.1649L91.7478 78.5962C90.4719 80.4829 91.992 82.9139 94.4441 82.8973ZM92.6685 69.2996C91.9042 68.8784 91.6527 67.9397 92.1193 67.2497L96.46 60.8313C96.9266 60.1414 97.9662 59.9142 98.7309 60.3356L107.285 65.0496C108.05 65.4708 108.301 66.4095 107.834 67.0995L103.087 74.1188C101.836 75.9685 99.961 77.3231 97.7813 78.0195L98.6079 76.7972C99.7557 75.1 99.1599 72.8765 97.2801 71.8405L92.6687 69.2993L92.6685 69.2996Z" fill="white"/>
					<path d="M117.196 95.4354C122.446 95.4021 127.214 92.9675 129.95 88.9222L134.697 81.9029C136.556 79.1548 135.591 75.5543 132.547 73.8767L123.992 69.1626C120.948 67.4851 116.959 68.3558 115.101 71.1039L110.76 77.5222C108.902 80.2703 109.866 83.8708 112.911 85.5484L116.82 87.703L114.5 91.1344C113.22 93.0262 114.752 95.4514 117.196 95.4354ZM115.42 81.8375C114.656 81.4163 114.404 80.4776 114.871 79.7877L119.212 73.3693C119.678 72.6793 120.718 72.4521 121.483 72.8735L130.037 77.5876C130.801 78.0088 131.053 78.9475 130.586 79.6374L125.839 86.6567C124.588 88.5063 122.713 89.861 120.533 90.5575L121.359 89.3354C122.507 87.6383 121.911 85.4147 120.032 84.3788L115.42 81.8375Z" fill="white"/>
					<path d="M137.299 114.256L66.5467 75.2665C65.4112 74.6408 63.9294 74.9645 63.2364 75.9892C62.5434 77.0139 62.9016 78.3517 64.037 78.9774L134.789 117.967C135.925 118.593 137.407 118.269 138.1 117.244C138.793 116.22 138.434 114.882 137.299 114.256Z" fill="white"/>
					<path d="M131.527 122.791L60.7747 83.8017C59.6393 83.1759 58.1574 83.4997 57.4644 84.5244C56.7714 85.5491 57.1296 86.8868 58.2651 87.5126L129.017 126.502C130.153 127.128 131.635 126.804 132.328 125.779C133.021 124.755 132.662 123.417 131.527 122.791Z" fill="white"/>
					<path d="M126.555 134.315C127.248 133.29 126.89 131.952 125.755 131.326L55.0023 92.3368C53.8668 91.7111 52.3849 92.0348 51.6919 93.0596C50.9989 94.0843 51.3571 95.422 52.4926 96.0477L123.245 135.037C124.38 135.663 125.862 135.339 126.555 134.315Z" fill="white"/>
					<path d="M66.9183 110.619C65.7828 109.993 64.3009 110.317 63.6079 111.342C62.9148 112.367 63.273 113.704 64.4085 114.33L99.7854 133.825C100.921 134.451 102.403 134.127 103.096 133.103C103.789 132.078 103.431 130.74 102.295 130.114L66.9183 110.619Z" fill="white"/>
					<path d="M205.848 67.7126L172.725 49.4592C171.589 48.8335 170.107 49.1572 169.414 50.1819C168.721 51.2066 169.08 52.5444 170.215 53.1701L203.338 71.4235C212.122 76.2639 214.906 86.6528 209.543 94.5817L178.434 140.582C173.072 148.51 161.563 151.023 152.779 146.183L148.42 143.781L155.764 132.922C156.457 131.898 156.099 130.56 154.963 129.934C153.828 129.309 152.346 129.632 151.653 130.657L139.82 148.153C134.458 156.082 122.949 158.595 114.165 153.755C111.824 152.464 109.01 152.19 106.443 153.001C92.366 157.452 78.5152 158.446 69.3747 158.497C68.5215 158.501 68.2066 157.525 68.9353 157.106C74.7886 153.742 80.1924 149.808 84.9967 145.414C87.6883 142.951 87.127 138.854 83.8439 137.045L38.3263 111.962C29.5423 107.121 26.7587 96.7323 32.1212 88.8031L63.2307 42.8033C68.593 34.8743 80.1018 32.3616 88.8858 37.2023L164.725 78.995C173.508 83.8355 176.292 94.2244 170.93 102.153L157.509 121.998C156.816 123.023 157.174 124.361 158.309 124.986C159.445 125.612 160.927 125.288 161.62 124.264L175.041 104.419C181.787 94.4436 178.285 81.3738 167.234 75.2841L99.8649 38.1586L101.844 35.232C107.206 27.303 118.715 24.7903 127.499 29.6308L160.622 47.8842C161.758 48.5099 163.24 48.1861 163.933 47.1614C164.626 46.1367 164.268 44.799 163.132 44.1733L130.009 25.9199C118.958 19.8303 104.479 22.9914 97.7332 32.9665L95.7539 35.8932L91.3955 33.4914C80.345 27.4017 65.8658 30.5627 59.1197 40.5379L28.0103 86.5376C21.264 96.513 24.7663 109.583 35.8168 115.672L81.3342 140.756C81.9634 141.103 82.0826 141.889 81.5683 142.359C77.0179 146.522 71.8974 150.249 66.3487 153.438C61.5612 156.19 63.7374 162.875 69.4042 162.844C78.9116 162.792 93.3314 161.753 108.036 157.104C109.233 156.726 110.553 156.857 111.656 157.465C122.706 163.555 137.185 160.393 143.931 150.418L145.911 147.492L150.269 149.894C161.32 155.983 175.799 152.822 182.545 142.847L213.654 96.8474C220.4 86.8723 216.899 73.8022 205.848 67.7126Z" fill="white"/>
				</g>
				<defs>
					<clipPath id="clip0_75500_81">
						<rect width="160.216" height="152.913" fill="white" transform="matrix(0.875819 0.48264 -0.56021 0.828351 86.2148 0.473633)"/>
					</clipPath>
				</defs>
			</svg>
		</div>

		<div class="testimonial-author display-flex flex-wrap direction-column">
			<?php
			echo wp_get_attachment_image( $avatar, 'sp_avatar', false, [
				'width'		=> 120,
				'height'	=> 120,
				'loading'	=> 'lazy'
			] );
			?>

			<div class="testimonial-author-info">
				<?php
				if( $name )
					printf(
						__( '%s%s%s', THEME_NAME ),
						'<div class="testimonial-author-name">', $name, '</div>'
					);

				if( $position )
					printf(
						__( '%s%s%s', THEME_NAME ),
						'<div class="testimonial-author-position">', $position, '</div>'
					);

				echo sp_get_stars_rating();
				?>
			</div>
		</div>

		<?php
		if( $text ){
			?>
			<div class="testimonial-text">
				<?php echo $text ?>
			</div>
			<?php
		}
		?>
	</div>

	<div class="testimonial-right">
		<img
			src="<?php echo wp_get_attachment_image_url( $image, 'large' ) ?>"
			width="627"
			height="374"
			loading="lazy"
			alt="<?php echo esc_attr( $name ) ?>"
		/>
	</div>
</div>

